<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Kube-Visibility | metaDocs</title><meta data-react-helmet="true" property="og:url" content="https://metakube.com/docs/Observability/kube-visibility"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Kube-Visibility | metaDocs"><meta data-react-helmet="true" name="description" content="Prometheus Operator deployment GitOps friendly"><meta data-react-helmet="true" property="og:description" content="Prometheus Operator deployment GitOps friendly"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://metakube.com/docs/Observability/kube-visibility"><link data-react-helmet="true" rel="alternate" href="https://metakube.com/docs/Observability/kube-visibility" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://metakube.com/docs/Observability/kube-visibility" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.08c63b90.css">
<link rel="preload" href="/assets/js/runtime~main.e76ffcd6.js" as="script">
<link rel="preload" href="/assets/js/main.d4e8ca28.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/kube-logo.svg" alt="Kubernetes Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/kube-logo.svg" alt="Kubernetes Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">metaKube</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/metaCluster/metaDocs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Quick Start</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Federation</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Observability</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Observability/kube-visibility">Kube-Visibility</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Networking</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">kube-visibility</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="author-information"></a>Author Information<a class="hash-link" href="#author-information" title="Direct link to heading">#</a></h3><div class="avatar"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/1197820?v=4"><div class="avatar__intro"><div class="avatar__name">Christian GonzÃ¡lez Di Antonio</div><small class="avatar__subtitle">Head of Cloud @aizon</small></div></div><br><p>This project was inspired by <a href="https://github.com/coreos/kube-prometheus" target="_blank" rel="noopener noreferrer">kube-prometheus</a> bundle but instead of using <a href="https://jsonnet.org/" target="_blank" rel="noopener noreferrer">jsonnet</a> for the customization and configuration, it uses <a href="https://github.com/kubernetes-sigs/kustomize" target="_blank" rel="noopener noreferrer">kustomize</a> to overlay the <a href="https://kubernetes.io/docs/concepts/cluster-administration/manage-deployment/" target="_blank" rel="noopener noreferrer">Kubernetes manifests</a> and <a href="https://googlecontainertools.github.io/kpt/" target="_blank" rel="noopener noreferrer">kpt</a> to distribute it as a package.</p><p>Also, this is <a href="https://www.weave.works/technologies/gitops/" target="_blank" rel="noopener noreferrer">GitOps</a> friendly.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="components-of-this-bundle"></a>Components of this bundle<a class="hash-link" href="#components-of-this-bundle" title="Direct link to heading">#</a></h2><p>This <a href="https://github.com/slashdevops/kube-visibility/blob/master/pkg" target="_blank" rel="noopener noreferrer">kpt package</a> will install the following software list into your Kubernetes cluster</p><table><thead><tr><th>Project</th><th>License</th></tr></thead><tbody><tr><td><a href="https://github.com/kubernetes-monitoring/kubernetes-mixin" target="_blank" rel="noopener noreferrer">kubernetes-mixin</a></td><td><a href="https://github.com/kubernetes-monitoring/kubernetes-mixin/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://github.com/kubernetes/kube-state-metrics" target="_blank" rel="noopener noreferrer">kube-state-metrics</a></td><td><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://github.com/prometheus/node_exporter" target="_blank" rel="noopener noreferrer">node_exporter</a></td><td><a href="https://github.com/prometheus/node_exporter/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://github.com/coreos/prometheus-operator" target="_blank" rel="noopener noreferrer">prometheus-operator</a></td><td><a href="https://github.com/prometheus-operator/prometheus-operator/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://github.com/DirectXMan12/k8s-prometheus-adapter" target="_blank" rel="noopener noreferrer">k8s-prometheus-adapter</a></td><td><a href="https://github.com/DirectXMan12/k8s-prometheus-adapter/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://github.com/brancz/kube-rbac-proxy" target="_blank" rel="noopener noreferrer">kube-rbac-proxy</a></td><td><a href="https://github.com/brancz/kube-rbac-proxy/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">prometheus</a></td><td><a href="https://github.com/prometheus/prometheus/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://prometheus.io/docs/alerting/alertmanager/" target="_blank" rel="noopener noreferrer">alertmanager</a></td><td><a href="https://github.com/prometheus/alertmanager/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">grafana</a></td><td><a href="https://github.com/grafana/grafana/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr></tbody></table><p><strong>NOTES</strong>:</p><ol><li><a href="https://github.com/kubernetes-monitoring/kubernetes-mixin" target="_blank" rel="noopener noreferrer">kubernetes-mixin</a> provides some prometheus rules and dashboards.</li></ol><p>Used Tools</p><table><thead><tr><th>Project</th><th>License</th></tr></thead><tbody><tr><td><a href="https://googlecontainertools.github.io/kpt/" target="_blank" rel="noopener noreferrer">kpt</a></td><td><a href="https://github.com/GoogleContainerTools/kpt/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr><tr><td><a href="https://kubernetes-sigs.github.io/kustomize/" target="_blank" rel="noopener noreferrer">kustomize</a></td><td><a href="https://github.com/kubernetes-sigs/kustomize/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">Apache License 2.0</a></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubernetes-version-supported"></a>Kubernetes version supported<a class="hash-link" href="#kubernetes-version-supported" title="Direct link to heading">#</a></h2><ul><li><code>&gt;= 1.18.x</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="project-layout-structure"></a>Project Layout Structure<a class="hash-link" href="#project-layout-structure" title="Direct link to heading">#</a></h2><p>The layout structure for this project is simple, the <a href="https://github.com/slashdevops/kube-visibility/tree/master/pkg" target="_blank" rel="noopener noreferrer">pkg folder</a> contains the <a href="https://googlecontainertools.github.io/kpt/guides/producer/blueprint/" target="_blank" rel="noopener noreferrer">kpt blueprint</a> implementation of kube-visibility, which is separate from the root of git project intentionally to avoid unnecessary files into the package when you install it using <a href="https://googlecontainertools.github.io/kpt/guides/consumer/get/" target="_blank" rel="noopener noreferrer">kpt pkg get</a> command.
The root folder could contain additional docs, examples, and CI/CD pipeline definitions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="customization-and-packager-tool"></a>Customization and packager tool<a class="hash-link" href="#customization-and-packager-tool" title="Direct link to heading">#</a></h2><p>The heart of this project are these two tools, so if you want to contribute with it you need to understand and manage it.</p><ul><li><a href="https://kubernetes-sigs.github.io/kustomize/" target="_blank" rel="noopener noreferrer">kustomize</a></li><li><a href="https://googlecontainertools.github.io/kpt/" target="_blank" rel="noopener noreferrer">kpt</a></li></ul><p>and of course, it is was possible thanks to the big and great idea of <a href="https://github.com/coreos/kube-prometheus" target="_blank" rel="noopener noreferrer">kube-prometheus project</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-install"></a>How to Install<a class="hash-link" href="#how-to-install" title="Direct link to heading">#</a></h2><p>To install this <a href="https://googlecontainertools.github.io/kpt/" target="_blank" rel="noopener noreferrer">kpt package</a> you just need to know about <a href="https://googlecontainertools.github.io/kpt/guides/consumer/" target="_blank" rel="noopener noreferrer">KPT Package Consumers
</a>, but in short:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">kpt pkg get https://github.com/slashdevops/kube-visibility/pkg@master kube-visibility</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>NOTE:</strong>  Remember the <code>pkg folder</code> into the <code>git path</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="try-it-on-minikube"></a>Try it on minikube<a class="hash-link" href="#try-it-on-minikube" title="Direct link to heading">#</a></h2><p>Looks inside <a href="https://github.com/slashdevops/kube-visibility/tree/master/HowTos" target="_blank" rel="noopener noreferrer">HowTos folder</a> for more detailed information about how to prepare minikube</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="minikube-setting"></a>minikube setting<a class="hash-link" href="#minikube-setting" title="Direct link to heading">#</a></h3><p>MacOS</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">minikube delete</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> memory </span><span class="token number" style="color:#36acaa">6144</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> cpus </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> disk-size 40G</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> vm-driver docker</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> kubernetes-version </span><span class="token number" style="color:#36acaa">1.18</span><span class="token plain">.9</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config view</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube start</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube status</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Linux</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># set</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> memory </span><span class="token number" style="color:#36acaa">6144</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &gt; much better</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> cpus </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># &gt; much better</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> disk-size 40G</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> vm-driver kvm2 </span><span class="token comment" style="color:#999988;font-style:italic"># for linux, for MacOS see HowTos/ folder</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config </span><span class="token builtin class-name">set</span><span class="token plain"> kubernetes-version </span><span class="token number" style="color:#36acaa">1.18</span><span class="token plain">.9</span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube config view</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube start</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># check</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube status</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Install kubernetes dashboard</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># OPTIONAL, EXECUTE IT IN DIFFERENT TERMINAL</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># I recommended it to see what is happening inside your cluster</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create clusterrolebinding cluster-admin-binding --clusterrole</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cluster-admin --serviceaccount</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kube-system:default</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n kube-system describe secret </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl -n kube-system get secret </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">grep</span><span class="token variable" style="color:#36acaa"> default </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">awk</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;{print </span><span class="token variable string variable" style="color:#36acaa">$1</span><span class="token variable string" style="color:#e3116c">}&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl proxy</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># then, open the following link in your browser: http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="download-and-apply"></a>Download and Apply<a class="hash-link" href="#download-and-apply" title="Direct link to heading">#</a></h3><p>Download and install the <code>kpt pkg</code> from <code>master branch</code> or the specify the <code>release tag</code>, more information here <a href="https://googlecontainertools.github.io/kpt/reference/pkg/get/" target="_blank" rel="noopener noreferrer">Command Reference / pkg / get</a></p><p>Install <code>kpt</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">brew tap GoogleContainerTools/kpt https://github.com/GoogleContainerTools/kpt.git</span></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kpt</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Install <code>kube-visibility</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> k8s-workspace</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> k8s-workspace/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kpt pkg get https://github.com/slashdevops/kube-visibility/pkg@master kube-visibility</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OPTIONAL, using git</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> init </span><span class="token builtin class-name">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -am </span><span class="token string" style="color:#e3116c">&quot;added kube-visibility tool&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OPTIONAL, using kpt live</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kpt live init kube-visibility/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OPTIONAL, list available kpt setters</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kpt cfg list-setters kube-visibility/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OPTIONAL, change one setter</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kpt cfg </span><span class="token builtin class-name">set</span><span class="token plain"> kube-visibility/ alertmanager.resources-limits-cpu 120m</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># INSTALL, install kube-visibility manifests</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># WORKAROUND, until kpt avoid problems with json and yaml files that not are part of k8s &#x27;kind&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Apply the manifest bundle to the cluster</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># NOTE 1: the first time you execute this command some errors appears at the end, wait until</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># prometheus-operator is up before apply again! (see the NOTE below).</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># to see it, use the command &#x27;kubectl get pod --all-namespaces&#x27; or just see in the kubernetes-dashboard (step above)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># NOTE 2: The second time you apply this command, they are take to long, because depending prometheus CRDs are big!</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kustomize build kube-visibility/instance </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl apply -f -</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OPTIONAL, depend on &#x27;kpt live init&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kpt live apply kube-visibility/ --reconcile-timeout=10m</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>NOTE:</strong>  The bundle of manifest generated with kustomize has some dependencies with
each other (prometheus depends on prometheus-operator and needs that it was created first), so when you
execute the first time the manifest, some errors will occur.
After the first execution you need to wait until some resources were created, and then you can execute
again the command to create the resources into the k8s cluster.
If you are using the kubernetes-dashboard you can watch when the first execution finished creating
the resources, and then you can execute it again to finish with the installation.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="once-installed-access-to-graphical-tools"></a>Once installed, access to graphical tools<a class="hash-link" href="#once-installed-access-to-graphical-tools" title="Direct link to heading">#</a></h3><p>All these tools are accessible (using the method described below) when you follow the instructions described in <a href="https://github.com/slashdevops/kube-visibility/tree/master/HowTos" target="_blank" rel="noopener noreferrer">HowTos folder</a> for minikube</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubernetes-dashboard"></a>kubernetes Dashboard<a class="hash-link" href="#kubernetes-dashboard" title="Direct link to heading">#</a></h4><p>Reference: <a href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Create a RoleBinding to <code>kube-system namespace default ServiceAccount</code> to access to the dashboard as ClusterAdmin</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create clusterrolebinding cluster-admin-binding --clusterrole</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cluster-admin --serviceaccount</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kube-system:default</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># get the token</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n kube-system describe secret </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl -n kube-system get secret </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">grep</span><span class="token variable" style="color:#36acaa"> default </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">awk</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;{print </span><span class="token variable string variable" style="color:#36acaa">$1</span><span class="token variable string" style="color:#e3116c">}&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Execute it in a different terminal</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl proxy</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Link:</strong> <a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy" target="_blank" rel="noopener noreferrer">Kubernetes Dashboard</a> --&gt; <a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy" target="_blank" rel="noopener noreferrer">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prometheus-dashboard"></a>Prometheus Dashboard<a class="hash-link" href="#prometheus-dashboard" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Execute it in a different terminal</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --namespace kube-visibility port-forward svc/prometheus-visibility </span><span class="token number" style="color:#36acaa">9090</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Link:</strong> <a href="http://localhost:9090" target="_blank" rel="noopener noreferrer">prometheus</a> --&gt; <a href="http://localhost:9090" target="_blank" rel="noopener noreferrer">http://localhost:9090</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="alertmanager-dashboard"></a>Alertmanager Dashboard<a class="hash-link" href="#alertmanager-dashboard" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Execute it in a different terminal</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --namespace kube-visibility port-forward svc/alertmanager-visibility </span><span class="token number" style="color:#36acaa">9093</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Link:</strong> <a href="http://localhost:9093" target="_blank" rel="noopener noreferrer">alertmanager</a> --&gt; <a href="http://localhost:9093" target="_blank" rel="noopener noreferrer">http://localhost:9093</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="grafana-dashboard"></a>Grafana Dashboard<a class="hash-link" href="#grafana-dashboard" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Execute it in a different terminal</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --namespace kube-visibility port-forward svc/grafana </span><span class="token number" style="color:#36acaa">3000</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Link:</strong>  <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">grafana</a> --&gt; <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000</a></p><ul><li><strong>user:</strong> admin</li><li><strong>password:</strong> admin</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="development--contributing"></a>Development / Contributing<a class="hash-link" href="#development--contributing" title="Direct link to heading">#</a></h2><p>WIP, but at least</p><p>If you want to contribute to this project do the following</p><ul><li><a href="https://help.github.com/en/github/getting-started-with-github/fork-a-repo" target="_blank" rel="noopener noreferrer">Fork the project</a></li><li>Clone the Forked repository</li><li>Create a <code>custom branch</code> or work on <code>develop branch</code></li><li>Create your custom <code>manifests/modifiers</code> or <code>grafana dashboard</code> or fix some bug what did you find</li><li>Merge and push your changes to the <code>custom branch</code> or <code>develop</code> branch in your forked repository</li><li>Create a Pull Request to official project <code>develop</code> branch</li><li>Wait until your <code>PR</code> to be approved and merged to the <code>master branch</code></li></ul><p>References</p><ul><li><a href="https://help.github.com/en/github/getting-started-with-github/fork-a-repo" target="_blank" rel="noopener noreferrer">Fork a repo</a></li><li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request-from-a-fork" target="_blank" rel="noopener noreferrer">Creating a pull request from a fork</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="license"></a>License<a class="hash-link" href="#license" title="Direct link to heading">#</a></h2><p>This module is released under the Apache License Version 2:</p><ul><li><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">https://www.apache.org/licenses/LICENSE-2.0</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/metaCluster/metaDocs/edit/master/website/docs/Observability/kube-visibility.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Federation/Admirality/topologies"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Multi-Cluster Topologies</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/global-load-balancing-solution-for-kubernetes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Concept Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#author-information" class="table-of-contents__link">Author Information</a></li><li><a href="#components-of-this-bundle" class="table-of-contents__link">Components of this bundle</a></li><li><a href="#kubernetes-version-supported" class="table-of-contents__link">Kubernetes version supported</a></li><li><a href="#project-layout-structure" class="table-of-contents__link">Project Layout Structure</a></li><li><a href="#customization-and-packager-tool" class="table-of-contents__link">Customization and packager tool</a></li><li><a href="#how-to-install" class="table-of-contents__link">How to Install</a></li><li><a href="#try-it-on-minikube" class="table-of-contents__link">Try it on minikube</a><ul><li><a href="#minikube-setting" class="table-of-contents__link">minikube setting</a></li><li><a href="#download-and-apply" class="table-of-contents__link">Download and Apply</a></li><li><a href="#once-installed-access-to-graphical-tools" class="table-of-contents__link">Once installed, access to graphical tools</a></li></ul></li><li><a href="#development--contributing" class="table-of-contents__link">Development / Contributing</a></li><li><a href="#license" class="table-of-contents__link">License</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Quick Start</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="#" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="#" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="#" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/metaCluster/metaDocs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 | metaKube.com <br> Made with â™¥ in Belfast</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e76ffcd6.js"></script>
<script src="/assets/js/main.d4e8ca28.js"></script>
</body>
</html>