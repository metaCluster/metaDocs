"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[869],{3620:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return p}});var r=a(7462),n=a(3366),o=(a(7294),a(3905)),i=["components"],s={title:"Multi-Cluster Topologies"},l=void 0,c={unversionedId:"Federation/Admirality/topologies",id:"Federation/Admirality/topologies",isDocsHomePage:!1,title:"Multi-Cluster Topologies",description:"Cluster Connections",source:"@site/docs/Federation/Admirality/topologies.md",sourceDirName:"Federation/Admirality",slug:"/Federation/Admirality/topologies",permalink:"/docs/Federation/Admirality/topologies",editUrl:"https://github.com/metaCluster/metaDocs/edit/master/website/docs/Federation/Admirality/topologies.md",version:"current",frontMatter:{title:"Multi-Cluster Topologies"},sidebar:"tutorialSidebar",previous:{title:"Concept",permalink:"/docs/Federation/Admirality/concept"},next:{title:"Cortex Metrics",permalink:"/docs/observability-cortex-metrics"}},u=[{value:"Cluster Connections",id:"cluster-connections",children:[]},{value:"Topologies",id:"topologies",children:[{value:"Central Control Plane",id:"central-control-plane",children:[]},{value:"Cloud Bursting",id:"cloud-bursting",children:[]},{value:"Decentralized Federation",id:"decentralized-federation",children:[]}]}],d={toc:u};function p(e){var t=e.components,a=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"cluster-connections"},"Cluster Connections"),(0,o.kt)("p",null,"Admiralty connects the control planes of Kubernetes clusters. Two clusters are said to be connected as source and target when controllers in the source cluster (e.g., run by the Admiralty agent) talk to the Kubernetes API of the target cluster. Just like controllers within a single cluster, controllers in either cluster may communicate using the target cluster's Kubernetes API as a message channel."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/admiraltyio/admiralty/master/docs/concepts/cluster_connection.svg",alt:null})),(0,o.kt)("h2",{id:"topologies"},"Topologies"),(0,o.kt)("p",null,"Clusters and their connections form a ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Directed_graph"},"directed graph"),". In particular:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Saying that cluster A is a source of cluster B is equivalent to saying that cluster B is a target of cluster A."),(0,o.kt)("li",{parentName:"ul"},"Each cluster can be a source and/or a target of multiple clusters."),(0,o.kt)("li",{parentName:"ul"},"Connections can go both ways."),(0,o.kt)("li",{parentName:"ul"},"Clusters can target themselves.")),(0,o.kt)("p",null,"Here are a few typical examples."),(0,o.kt)("h3",{id:"central-control-plane"},"Central Control Plane"),(0,o.kt)("p",null,"This is perhaps the most common topology. A central cluster, often called the management cluster, targets several workload clusters. This topology is useful for many of the use cases."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/admiraltyio/admiralty/master/docs/concepts/central_control_plane.svg",alt:null})),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"The management cluster is not on the critical path.")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If the Admiralty agent in the management cluster or the management cluster itself breaks or loses connectivity with workload clusters, existing pods and services in the workload clusters continue to run and serve requests\u2014if pods are evicted in the meantime, they're even recreated locally by PodChaperons so your applications stay available. However, to update applications during that time, you'd have to connect to individual clusters, so we strongly recommend having a highly available management cluster (supported by most distributions) and a disaster recovery strategy just in case (e.g. a ",(0,o.kt)("a",{parentName:"p",href:"https://velero.io/"},"Velero")," backup)."))),(0,o.kt)("h3",{id:"cloud-bursting"},"Cloud Bursting"),(0,o.kt)("p",null,"In this topology, a primary on-prem cluster with fixed resources targets both itself and a secondary cloud-based cluster with elastic resources. Using Kubernetes scheduling preferences (node affinities), Admiralty schedules applications to the primary cluster when resources are available; to the secondary cluster otherwise."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/admiraltyio/admiralty/master/docs/concepts/cloud_bursting.svg",alt:null})),(0,o.kt)("h3",{id:"decentralized-federation"},"Decentralized Federation"),(0,o.kt)("p",null,"Organizations in different administrative domains, even different trust domains, managing different clusters, may want to connect their control planes, e.g., to share resources, or to delegate operations, without having to rely on a central cluster owned by a single organization. Admiralty supports this topology, especially useful for academic research platforms, or for vendor-managed deployments."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/admiraltyio/admiralty/master/docs/concepts/decentralized_federation.svg",alt:null})))}p.isMDXComponent=!0}}]);